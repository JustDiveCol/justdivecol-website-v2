import{u as l,j as e,m as g,g as b,r,h as K}from"./react-vendor-JDUKQ860.js";import{S}from"./SEOComponent-KZcpJVKA.js";import{s as u}from"./animations-Ct1q3Gi8.js";import{c as T}from"./index-DP9SIUBN.js";import{e as x,d as v}from"./_index-FZjOVwKY.js";import{H as C}from"./HeaderComponent-OnxpQp7E.js";import{T as D,D as w,G as U,a as I,C as E,b as k}from"./TripsCard-B9xcEQJ5.js";import{p as P}from"./formatters-BGiP7xkA.js";import"./sharedData-D-1XTojg.js";const F=({availableTrips:t,titleKey:n,noTripsMessageKey:s,translationNS:a})=>{const{t:i,i18n:d}=l(["experiences","common",a]);return!n||!t?null:e.jsxs("div",{id:"available-trips-section-vertical",className:"bg-brand-primary-medium p-6 rounded-lg shadow-lg scroll-mt-24",children:[e.jsx("h3",{className:"text-2xl font-sans font-bold text-brand-white mb-4",children:i(n,{ns:a})}),t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(o=>e.jsx(D,{tripData:o,translationNS:"experiences",lang:d.language,t:i},o.id))}):e.jsx("div",{children:e.jsx("p",{className:"font-serif text-sm text-brand-neutral/80",children:i(s,{ns:"common"})})})]})},H=({diveSiteData:t,translationNS:n})=>{const{t:s}=l(n);return!t||!t.sites||t.sites.length===0?null:e.jsxs("section",{children:[e.jsx("h2",{className:"text-3xl font-sans font-bold text-brand-white mb-6",children:s(t.titleKey)}),e.jsx("div",{className:"space-y-6",children:t.sites.map(a=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-sans font-semibold text-brand-cta-green",children:s(a.nameKey)}),e.jsx("p",{className:"mt-1 font-serif text-brand-neutral/90 text-justify",children:s(a.descriptionKey)})]},a.id))})]})},L=({destinationData:t,upcomingTrips:n})=>{const{t:s}=l(["destinations","common","contact","experiencesPage"]);if(!t||!t.page)return e.jsx("div",{className:"flex items-center justify-center min-h-screen text-red-500 text-2xl",children:"Destination data incomplete."});const a=s("contactWhatsAppMessage",{ns:"contact",destinationName:s(t.nameKey,{ns:"destinations"})}),i=`https://wa.me/${T.contactInfo.phone.replace(/\s/g,"")}?text=${encodeURIComponent(a)}`;return e.jsxs(g.div,{variants:u,initial:"hidden",animate:"show",exit:"hidden",className:"bg-brand-primary-dark text-brand-neutral",children:[e.jsx(C,{sectionData:{titleKey:t.nameKey,subtitleKey:t.card.descriptionKey,headerImageUrl:t.page.headerImageUrl},translationNS:"destinations"}),e.jsxs("div",{className:"container mx-auto p-4 md:p-8 grid lg:grid-cols-3 gap-8",children:[e.jsxs("main",{className:"lg:col-span-2 space-y-16 lg:sticky top-24 h-fit",children:[e.jsx(w,{descriptionData:t.page.destinationInfo,translationNS:"destinations"}),e.jsx(H,{diveSiteData:t.page.diveSites,translationNS:"destinations"}),e.jsx(U,{galleryData:t.page.gallery,translationNS:"destinations"})]}),e.jsxs("aside",{className:"lg:col-span-1 space-y-8 lg:sticky top-24 h-fit",children:[e.jsx(I,{detailsData:t.page.details,translationNS:"destinations"}),e.jsx(E,{checklistData:{titleKey:t.page.uniqueFinds.titleKey,items:t.page.uniqueFinds.items},translationNS:"destinations"}),e.jsx(F,{availableTrips:n,titleKey:"destinationUpcomingTripsTitle",noTripsMessageKey:"noUpcomingTrips",translationNS:"destinations"}),e.jsx(k,{ctaData:{titleKey:x.customTripCta.titleKey,buttonTextKey:x.customTripCta.ctaTextKey,link:i,isExternal:!0},translationNS:"experiencesPage"})]})]})]})},W=()=>{const{destinationId:t}=b(),{t:n}=l(["destinations","common"]),[s,a]=r.useState(null),[i,d]=r.useState([]),[o,h]=r.useState(!0),[f,j]=r.useState(!1);return r.useEffect(()=>{const m=v[t];if(m){const p=new Date;p.setHours(0,0,0,0);const y=P.filter(c=>c.destinationId===t&&new Date(c.details.endDate)>=p).sort((c,N)=>new Date(c.details.startDate)-new Date(N.details.startDate));a(m),d(y)}else j(!0);h(!1)},[t]),o?e.jsxs("div",{className:"flex items-center justify-center min-h-screen text-brand-white text-2xl",children:[n("common:loading"),"..."]}):f||!s?e.jsx(K,{to:"/404",replace:!0}):e.jsxs(e.Fragment,{children:[e.jsx(S,{title:n(s.seo.titleKey,{ns:"destinations"}),description:n(s.seo.descriptionKey,{ns:"destinations"}),imageUrl:s.page.headerImageUrl,url:`/destinos/${s.id}`}),e.jsx(g.div,{variants:u,initial:"hidden",animate:"animate",exit:"hidden",children:e.jsx(L,{destinationData:s,upcomingTrips:i})})]})};export{W as default};
